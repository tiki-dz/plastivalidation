import 'package:flutter/material.dart';import 'package:flutter_barcode_scanner/flutter_barcode_scanner.dart';import 'package:get/get.dart';import 'package:get/get_state_manager/src/simple/get_controllers.dart';import 'package:just_audio/just_audio.dart';import 'package:plastivalidation/services/service.auth.dart';import 'package:intl/intl.dart';import '../constWidget/snackbar.const.dart';class HomeController extends  GetxController { AudioPlayer player = AudioPlayer();  @override  void onInit() {    // TODO: implement onInit    super.onInit();  }  @override  void onReady() {    super.onReady();  }  scanCode() {    FlutterBarcodeScanner.scanBarcode("#f39947", "Cancel", false, ScanMode.QR)        .then((barcode)async  {      Get.defaultDialog(        title: "",        content: CircularProgressIndicator(),      );      dynamic result =await  AuthService.check(barcode.toString());      Get.back();      if (result != null) {        await player.setAsset("assets/sound/success-sound-effect.mp3");        player.play();        Get.defaultDialog(          title: "",          content: Image.asset('assets/logo/success.gif')        );        Future.delayed(Duration(seconds: 2),                (){          Get.back();                  Get.defaultDialog(                      title: "Détail ticket",                      content: Padding(                        padding: const EdgeInsets.all(16.0),                        child: Column(                          mainAxisAlignment: MainAxisAlignment.center,                          children: [                            Row(children: [                              Text("Prénom : "),       Text(result['firstName'].toString()),                            ],),                            Row(children: [                              Text("Nom : "),       Text(result['lastName'].toString()),                            ],),                            Row(children: [                              Text("Nom d'événement : "),       Text(result['eventName'].toString()),                            ],),                            Row(children: [                              Text("Date d'achat : "), Text(result['time'].toString().substring(0,10)),                            ],),                          ],                        ),                      ));        });      }else {        await player.setAsset("assets/sound/mixkit-wrong-answer-bass-buzzer-948.wav");        player.play();        Get.defaultDialog(            title: "",            content: Image.asset('assets/logo/error.gif')        );      }    });  }}